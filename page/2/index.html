<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Page 2 | 马 又</title>
  <meta name="author" content="dongc">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="马 又"/>

  
    <meta property="og:image" content="undefined"/>
  

  
  
    <link href="/favicon.png" rel="icon">
  

  <!-- CSS -->
  <link rel="stylesheet" href="/css/themes/readable.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  



</head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
       <a class="navbar-brand" href="/">马 又</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="Archives">
			  <i class=""></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/douban" title="books">
			  <i class=""></i>Books
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class=""></i>About me
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 <div class="page-header page-header-inverse ">
  <h1 class="title title-inverse ">正襟危坐一码农</h1>
</div>

<div class="row page">

	
	<div class="col-md-9">
	

		<div id="top_search"></div>
		<div class="mypage">
		
		<!-- title and entry -->
        <!-- render top articles firstly -->
        
        <!-- render other articles -->
        
           
           <div class="post">
			  
	
	<!-- display as entry -->	
	<a href="/2015/12/09/717/"  style="text-decoration:none">
		<h3 class="title">
			<div class="article-title" style="color:#4C4C4C">Linux I/O (一)：Nio Is Real &#39;Zero-Copy&#39;?</div>
		</h3>
		</a>
	


			  <div class="entry">
  <div class="row">
	
	
		<h3 id="What-Is-‘Zero-Copy’"><a href="#What-Is-‘Zero-Copy’" class="headerlink" title="What Is ‘Zero-Copy’?"></a>What Is ‘Zero-Copy’?</h3><p>Zero copy refers to a collection of techniques which reduce the number of copies of blocks of data in order to make data transfer more efficient. This helps reduce the number of unnecessary memory accesses and CPU consumption, and therefore enhance overall system performance.</p>
<p>“零拷贝”并非字面上意思。下面以“<strong>一次网络数据包读取流程</strong>”为例，讲解什么是“零拷贝技术” ？
采用“传统方式”，需要两次DMA拷贝，两次CPU拷贝。借用“sendfile()”方式，仅需要一次内存拷贝，两次DMA拷贝。</p>
<p><span style="text-decoration:underline;font-weight:bold">two CPU copy &nbsp;two DMA copy</span></p>
<p><a href="http://odwh5mzb8.bkt.clouddn.com/nio-traditional.png" target="_blank" rel="external"><img src="http://odwh5mzb8.bkt.clouddn.com/nio-traditional.png" alt="nio-traditional"></a></p>
<p><span class="s1">实例代码：</span></p>
<pre class="lang:default decode:true  ">
    read(file, tmp_buf, len);
    write(socket, tmp_buf, len);
</pre>

<p><span style="text-decoration:underline;font-weight:bold">one CPU copy &nbsp;two DMA copy</span></p>
<p><a href="http://odwh5mzb8.bkt.clouddn.com/nio_sendfile.png" target="_blank" rel="external"><img src="http://odwh5mzb8.bkt.clouddn.com/nio_sendfile.png" alt="nio_sendfile"></a></p>
		<!-- only display read_more button if there's more to display -->
		<a type="button" style="font-size:15px" href="/2015/12/09/717/#more" class="more">Read More...</a>
	
	</div>
</div>

			  </div>
           
		
           
           <div class="post">
			  
	
	<!-- display as entry -->	
	<a href="/2015/11/03/559/"  style="text-decoration:none">
		<h3 class="title">
			<div class="article-title" style="color:#4C4C4C">Javascript (六)：Know &#39;Closure&#39; Inside Out?</div>
		</h3>
		</a>
	


			  <div class="entry">
  <div class="row">
	
	
		<h3 id="What-is-closure"><a href="#What-is-closure" class="headerlink" title="What is closure?"></a>What is closure?</h3><p>In JavaScript, closures are often regarded as some sort of magical unicorn that only advanced developers can really understand, but truth be told it is just a simple understanding of the scope chain. A closure, as <strong><span style="text-decoration: underline;"><a href="https://en.wikipedia.org/wiki/Douglas_Crockford" target="_blank" rel="external">Douglas Crockford</a></span></strong> says, is simply:</p>
<blockquote>
<p>An inner function always has access to the vars and parameters of its outer function, even after the outer function has returned…</p>
</blockquote>
<p>The code below is an example of a closure:</p>
<pre class="lang:default decode:true">
// ==>进入全局执行上下文
var dongcCard = card('dongc');

dongcCard();

function card(sname) {
    var gender = 'male';
    return function showInfo() {
        console.log('[carInfo] name:%s gender:%s', sname, gender);
    }
}
</pre>

<p>read above code , have two doubts:</p>
<ul>
<li><strong>为何card函数在定义之前，可以被调用？</strong></li>
<li><strong>为何card函数执行完毕后，card函数中“gender”属性仍然可以被访问？</strong></li>
</ul>
<p>究其原由，深入内核底层，一探究竟。</p>
<h3 id="How-do-javascript-engine-work？"><a href="#How-do-javascript-engine-work？" class="headerlink" title="How do javascript engine work？"></a>How do javascript engine work？</h3><p>The JavaScript interpreter in a browser is implemented as a single thread. Actions or Events being queued in what is called the <span style="color: #000000;"><strong>execution stack</strong></span>. The diagram below is an abstract view of a single threaded stack:
<a href="/images/ecstack.jpg"><img src="/images/ecstack.jpg" alt="ecstack"></a>
		<!-- only display read_more button if there's more to display -->
		<a type="button" style="font-size:15px" href="/2015/11/03/559/#more" class="more">Read More...</a>
	
	</div>
</div>

			  </div>
           
		
           
           <div class="post">
			  
	
	<!-- display as entry -->	
	<a href="/2015/09/11/479/"  style="text-decoration:none">
		<h3 class="title">
			<div class="article-title" style="color:#4C4C4C">Refactor (一) ：Refactor As A Routine Work</div>
		</h3>
		</a>
	


			  <div class="entry">
  <div class="row">
	
	
		<h3 id="What-refactor"><a href="#What-refactor" class="headerlink" title="What refactor ?"></a>What refactor ?</h3><p>Refactoring is done to fill in short-cuts, eliminate duplication and dead code, and to make the design and logic clear.Always to simplify the code and to make it easier to understand. Always to make it easier and safer to change in the future.</p>
<h3 id="Why-refactor"><a href="#Why-refactor" class="headerlink" title="Why refactor ?"></a>Why refactor ?</h3><ul>
<li><strong>代码写得脏</strong></li>
</ul>
<p>可读性差、逻辑不清，导致问题不断，阻碍快速迭代开发。</p>
<p>迫于“时间紧迫、需求易变、编码能力”，那时那刻“思路不清晰<span style="text-decoration: underline;">”</span>地写出“不堪入目”代码。</p>
<ul>
<li><strong>框架单薄，无力支持</strong></li>
</ul>
<p>随着业务量增加，现有的架构太单薄，无力支持庞大的业务量，不得不“<strong>Large Scale Refactoring</strong>”。</p>
<h3 id="How-refactor"><a href="#How-refactor" class="headerlink" title="How refactor ?"></a>How refactor ?</h3><ul>
<li><strong>Confirm your understanding of code</strong></li>
</ul>
<p>首先弄懂代码、增加必要注释。针对业务复杂的，借助UML梳理业务</p>
<ul>
<li><strong>Make refactor safe</strong></li>
</ul>
<p>Regression test your refactoring work and Reviewing all of these changes , ensure that you haven’t changed the behavior – it still works the same.</p>
		<!-- only display read_more button if there's more to display -->
		<a type="button" style="font-size:15px" href="/2015/09/11/479/#more" class="more">Read More...</a>
	
	</div>
</div>

			  </div>
           
		

		</div>

		<!-- pagination -->
		<div>
  		<center>
		<div class="pagination">
<ul class="pagination">
	 
		
    	<li class="prev"><a href="/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i> Prev</a></li>
  		

        <li><a href="/"><i class="fa fa-home"></i>Home</a></li>

		
		   <li class="next"> <a href="/page/3/" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a> </li>          
        
	
</ul>
</div>

  		</center>
		</div>

		
		
	</div> <!-- col-md-9 -->

	
		<div class="col-md-3">
	<div id="sidebar">
	
			
<div class="widget">
	<h4>Links</h4>
	<ul class="blogroll list-unstyled">
	
		<li><i class="fa fa-link"></i><a href="http://martinfowler.com/" title="" target="_blank"]);">martinfowler</a></li>
	
		<li><i class="fa fa-link"></i><a href="http://jenkov.com/" title="" target="_blank"]);">jenkov</a></li>
	
		<li><i class="fa fa-link"></i><a href="http://coolshell.cn/" title="" target="_blank"]);">coolshell</a></li>
	
	</ul>
</div>


		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->

	
	
</div> <!-- row-fluid -->


	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2017 dongc
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



</body>
   </html>
